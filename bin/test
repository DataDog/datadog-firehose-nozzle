#!/bin/bash

set -e

SCRIPT_DIR=`dirname $0`
cd ${SCRIPT_DIR}/..

echo "Go formatting..."
go fmt ./datadogclient ./datadogfirehosenozzle ./logger ./uaatokenfetcher ./nozzleconfig ./testhelpers

echo "Go vetting..."
go vet ./datadogclient ./datadogfirehosenozzle ./logger ./uaatokenfetcher ./nozzleconfig ./testhelpers

echo "Recursive ginkgo... ${*:+(with parameter(s) }$*${*:+)}"
ginkgo -r --race --randomizeAllSpecs --failOnPending -cover $*
